# AI Archives System Integration Rules

These rules govern how AI agents should interact with the AI Archives system, search for information, update archives, and handle custom rules.

## Archives Search and Retrieval

- **Proactive Search**: Before attempting to solve complex problems, search the archives for relevant information using the search feature.
- **User-Triggered Search**: When the user says "search archives" or "check archives" for a topic, immediately use the archives search functionality.
- **Search Command**: Use `python scripts/archives_cli.py search "query"` to search archives.
- **Cross-Project Knowledge**: When working on tasks that may involve both frontend and backend, search both project archives.
- **Context Building**: After finding relevant information, incorporate insights from archives into your response.

```bash
# Example search command
python scripts/archives_cli.py search "authentication error"
```

## Archives Update Protocol

- **User Permission Required**: NEVER add to archives automatically. Only add content when explicitly requested by the user.
- **Update Triggers**: When the user says phrases like "add this to archives", "update archives with", or "document this in archives", then update archives.
- **Proper Categorization**: Categorize new information by:
  - Project (frontend, backend, shared)
  - Section (setup, architecture, errors, fixes, apis, etc.)
  - Add appropriate titles and formatting

```bash
# Example archive update command
python scripts/archives_cli.py add --project=frontend --section=errors --title="JWT Authentication Error" --content="Detailed description of the issue..."
```

## Custom Rules Management

- **Rule Update Triggers**: When the user says "update the rules to...", "add rule for...", or similar phrases, update the CUSTOM RULES, not the .cursorrules file.
- **NEVER Edit .cursorrules Directly**: The .cursorrules file is generated by combining base rules with custom rules. Never edit it directly.
- **Custom Rules Location**: All custom rules should be added to files in `archives/custom_rules/`.
- **Rule Updates Command**: Use the archives CLI to add or update rules.

```bash
# How to update custom rules
python scripts/archives_cli.py rule add --name=rule_name --content="Rule content..."
```

## Multi-Agent Scratchpad Redirection

- **Current Task Documentation**: Instead of using the scratchpad in .cursorrules, use a dedicated file in the archives:
  - Location: `archives/projects/shared/current_task.md`
  - Update this file to track progress, status, and next steps

- **Lessons and Insights**: Instead of adding to the Lessons section in .cursorrules, store valuable insights in:
  - Location: `archives/projects/shared/lessons.md`
  - Categorize lessons appropriately (e.g., frontend, backend, deployment)

```bash
# Update current task status
python scripts/archives_cli.py add --project=shared --section=current_task --title="Task Progress" --content="Current status and next steps..."

# Add new lesson learned
python scripts/archives_cli.py add --project=shared --section=lessons --title="Important Insight" --content="Lesson details..."
```

## Archive File Structure Conventions

- **Markdown Format**: All archive content should be in Markdown format.
- **Clear Headings**: Use proper heading levels (# for titles, ## for sections, etc.).
- **Code Blocks**: Always use proper code fencing (```language) for code snippets.
- **Timestamps**: Include timestamps for important events or changes.
- **Cross-References**: Reference related archive entries when relevant.

## Integration Workflow

1. When beginning work on a task:
   - Search archives for relevant previous work
   - Check current_task.md for context

2. During problem-solving:
   - Reference archives when encountering similar issues
   - Document key decisions and approaches

3. After completing a task:
   - When asked, update archives with new knowledge
   - Add any lessons learned to lessons.md

## Special Commands Reference

| User Says | AI Action |
|-----------|-----------|
| "search archives for X" | Search the archives system for X |
| "update archives with Y" | Add Y to appropriate archive section |
| "update the rules to Z" | Update custom rules with Z |
| "get archive status" | List recent archive entries |
| "regenerate cursorrules" | Run integrate_cursorrules.py |

## Regenerating the Integrated cursorrules File

After any changes to custom rules, the integrated .cursorrules file should be regenerated:

```bash
python scripts/integrate_cursorrules.py
```

This combines the base cursorrules file with all custom rules. 